{% load static custom_filters %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SmoothlySEO - Optimiza tu Sitio Web{% endblock %}</title>
    <meta name="description" content="SmoothlySEO: Analiza y optimiza tu sitio web con herramientas SEO avanzadas. Mejora tu posicionamiento en buscadores.">
    <meta name="keywords" content="SEO, análisis web, optimización web, SmoothlySEO, posicionamiento">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Alejandro Rodríguez Gómez">
    <meta name="google-site-verification" content="GAqWZz9TGclLR2jt8o2mptyPt7ph7d52U2Tj7ynRgxE" />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{% static 'images/favicon.ico' %}">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <div class="ms-4">
                <a class="navbar-brand" href="{% url 'home' %}">
                    <img src="{% static 'images/logo.png' %}" alt="logo-smoothly" class="logo-nav">
                </a>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Menú de navegación">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-4 me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'caracteristicas' %}" {% if request.path == '/caracteristicas/' %}aria-current="page"{% endif %}>Características</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'subscribe' %}" {% if request.path == '/subscribe/' %}aria-current="page"{% endif %}>Tarifas</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="recursosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Recursos</a>
                        <ul class="dropdown-menu" aria-labelledby="recursosDropdown">
                            <li><a class="dropdown-item" href="{% url 'blog' %}">Blog</a></li>
                            <li><a class="dropdown-item" href="{% url 'centro_ayuda' %}">Centro de ayuda</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="empresaDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Empresa</a>
                        <ul class="dropdown-menu" aria-labelledby="empresaDropdown">
                            <li><a class="dropdown-item" href="{% url 'quienes-somos' %}">Quienes somos</a></li>
                            <li><a class="dropdown-item" href="{% url 'contacto' %}">Contacto</a></li>
                        </ul>
                    </li>
                </ul>
                <div class="d-flex me-5">
                    {% if not user.is_authenticated %}
                        <a href="{% url 'auth' %}" class="btn btn-primary">Iniciar sesión</a>
                    {% else %}
                        <a href="{% url 'overview' %}" class="btn btn-outline-primary me-3 boton-ir-app">Ir a la app</a>
                        <a href="{% url 'logout' %}" class="btn btn-primary">Cerrar sesión</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenedor principal con padding para evitar superposición -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Modal de Cookies -->
    <div class="modal fade" id="cookieModal" tabindex="-1" aria-labelledby="cookieModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content cookie-modal">
                <div class="modal-body">
                    <h5 class="modal-title" id="cookieModalLabel">¿Aceptas que utilicemos cookies? 🍪</h5>
                    <p>Utilizamos cookies esenciales para que SmoothlySEO funcione. Nos gustaría usar cookies adicionales para personalizar tu experiencia, medir el rendimiento y mejorar nuestro servicio, pero solo con tu permiso. <a href="{% url 'politica_cookies' %}" class="text-decoration-none text-white">Más info</a>.</p>
                    <div class="cookie-buttons mt-3">
                        <button class="btn btn-success btn-sm me-2 accept-all">Aceptar todas</button>
                        <button class="btn btn-outline-light btn-sm me-2 reject-all">Rechazar no esenciales</button>
                        <button class="btn btn-primary btn-sm manage-cookies">Administrar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}
        <script src="{% static 'js/navbar.js' %}"></script>
        <script src="{% static 'js/cookies.js' %}"></script>
        {% block extra_scripts %}{% endblock %}
    {% endblock %}
</body>
</html>